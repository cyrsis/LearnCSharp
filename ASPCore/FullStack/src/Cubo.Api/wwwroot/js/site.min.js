$(function(){function t(){ko.applyBindings(new i)}function i(){function i(){$.get("api/buckets",function(n){t.buckets(n)})}var t=this;t.buckets=ko.observableArray([]);t.bucket=ko.observable(new n("",[]));t.bucketName=ko.observable("");t.itemKey=ko.observable("");t.itemValue=ko.observable("");t.getBucket=function(i){$.get("api/buckets/"+i,function(i){t.bucket(new n(i.name,i.items))})};t.getItem=function(n){$.get("api/buckets/"+t.bucket().name()+"/items/"+n,function(n){alert(n.value)})};t.createBucket=function(){var n=t.bucketName();$.post("api/buckets/"+n,function(){t.bucketName("");t.buckets.push(n)})};t.createItem=function(){var i=t.bucket().name(),n=t.itemKey(),r=t.itemValue();$.ajax({type:"POST",url:"api/buckets/"+i+"/items",contentType:"application/json",data:JSON.stringify({key:n,value:r}),success:function(){t.bucket().items.push(n);t.itemKey("");t.itemValue("")}})};t.bucketSelected=ko.computed(function(){return t.bucket().name()!=""});t.hasBucketName=ko.computed(function(){return t.bucketName()!=""});i()}function n(n,t){this.name=ko.observable(n);this.items=ko.observableArray(t)}t()})();